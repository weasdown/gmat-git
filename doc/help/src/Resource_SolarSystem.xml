<?xml version="1.0" encoding="UTF-8"?>
<refentry version="5.0" xml:id="SolarSystem"
          xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:xi="http://www.w3.org/2001/XInclude"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:m="http://www.w3.org/1998/Math/MathML"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:db="http://docbook.org/ns/docbook">
  <indexterm>
    <primary>SolarSystem</primary>
  </indexterm>

  <refmeta>
    <refentrytitle>SolarSystem</refentrytitle>

    <refmiscinfo class="source">GMAT</refmiscinfo>

    <refmiscinfo class="manual">Resources</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>SolarSystem</refname>

    <refpurpose>High level solar system configuration options</refpurpose>
  </refnamediv>

  <refsection>
    <title>Description</title>

    <para>The <guilabel>SolarSystem</guilabel> resource allows you to define
    global properties for the model of the solar system including the
    ephemeris source for built-in celestial bodies and selected settings to
    improve performance when medium fidelity modeling is acceptable for your
    application. This resource cannot be modified in the mission
    sequence.</para>

    <note>
      <para>As of release R2015a, GMAT uses two separate solar system
      configurations for core parts of the system. For propagation, GMAT uses
      the source specified by
      <guilabel>SolarSystem</guilabel>.<guilabel>EphemerisSource</guilabel>
      and the <guilabel>CelestialBody</guilabel> properties configured on each
      resource. For event location with the new
      <guilabel>ContactLocator</guilabel> and
      <guilabel>EclipseLocator</guilabel> resources, GMAT always uses SPICE
      data for <guilabel>SolarSystem</guilabel> and
      <guilabel>CelestialBody</guilabel> properties. See <xref
      linkend="ContactLocator"/>, <xref linkend="EclipseLocator"/>, and <xref
      linkend="CelestialBody"/> for details.</para>
    </note>

    <para><phrase role="ref_seealso">See Also</phrase>: <xref
    linkend="CelestialBody"/>, <xref linkend="LibrationPoint"/>, <xref
    linkend="Barycenter"/>, <xref linkend="CoordinateSystem"/></para>
  </refsection>

  <refsection>
    <title>Fields</title>

    <informaltable colsep="0" frame="topbot">
      <tgroup cols="2">
        <colspec colnum="1" colwidth="1.3*"/>

        <colspec colnum="2" colwidth="3*"/>

        <thead>
          <row>
            <entry>Field</entry>

            <entry>Description</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><guilabel>DEFilename</guilabel></entry>

            <entry><para> The path and name of the DE file. </para>
            <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Valid DE file</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <literal>../data/planetary_ephem/de/leDE1941.405</literal>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>EphemerisSource</guilabel></entry>

            <entry><para> The ephemeris model for built-in celestial bodies.
            </para> <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para><guilabel>DE405</guilabel>,
                    <guilabel>DE421</guilabel>, <guilabel>DE424</guilabel>, or
                    <guilabel>SPICE</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>DE405</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>EphemerisUpdateInterval</guilabel></entry>

            <entry><para>The time between time updates for celetial body
            ephemeris. For example, if
            <guilabel>EphemerisUpdateInterval</guilabel> = 60, if an ephemeris
            call is made at time t = 1200, and a subsequent call is made at
            time t = 1210, the same ephemeris will be returned for the second
            call. This option is for high speed, low fidelity modeling or for
            use when modeling orbits far from third body perturbation
            sources. </para> <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real &gt;= 0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>LSKFilename</guilabel></entry>

            <entry><para> The path and name of the SPK leap second kernel.
            </para> <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Valid SPK leapsecond kernel</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <literal>../data/time/naif0011.tls</literal>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>PCKFilename</guilabel></entry>

            <entry><para>The path and name of the PCK planetary constants
            kernel.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Path to valid PCK planetary constants kernel
                    (<filename>.tpc</filename>)</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><literal>../data/planetary_coeff/pck00010.tpc</literal></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>SPKFilename</guilabel></entry>

            <entry><para>The path and name of the SPK orbit ephemeris kernel.
            </para> <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Valid SPK ephemeris kernel (.bsp)</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <literal>../data/planetary_ephem/spk/DE405AllPlanets.bsp</literal>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>UseTTForEphemeris</guilabel></entry>

            <entry><para>Flag to use Terrestrial Time (TT) as input to the
            orbital ephemeris routines. When set to false, TDB is used.
            </para> <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>
                      <guilabel>true,false</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>false</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </refsection>

  <refsection>
    <title>GUI</title>

    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata align="center" contentdepth="100%"
                     fileref="files/images/Resource_SolarSystem_GUI_1.png"
                     scalefit="1" width="100%"/>
        </imageobject>
      </mediaobject>
    </screenshot>

    <para>The <guilabel>SolarSystem</guilabel> dialog box allows you to
    configure global properties for solar system modeling. The default
    configuration is illustrated above. Use <guilabel>Ephemeris
    Source</guilabel> to choose the ephemeris model for built-in celestial
    bodies. If you select either <guilabel>DE405</guilabel>,
    <guilabel>DE421</guilabel>, or <guilabel>DE424</guilabel> the dialog box
    above illustrates available options.</para>

    <warning>
      <para>GMAT allows you to provide user-created DE or SPK kernel files but
      we recommend using the files distributed with GMAT. The files provided
      with GMAT have been extensively tested for consistency and accuracy with
      the original data provided by JPL and other models in GMAT. Using
      inconsistent ephemeris files or user-generated files can result in
      instability or numerical issues if the files are not generated
      correctly.</para>

      <para>Changing the ephemeris source for an application is equivalent to
      making a fundamental change to the model of the solar system. We
      recommend selecting the <guilabel>EphemerisSource</guilabel> early in
      the analysis process and using that model consistently. In the event
      that an ephemeris model change is necessary, we recommend that you
      change the model in the script file and not via the GUI. We allow you to
      change <guilabel>EphemerisSource</guilabel> via the GUI for convenience
      in early design phases when rigorous consistency in modeling is less
      important.</para>

      <para>Additionally, when using DE as the
      <guilabel>EphemerisSource</guilabel>, modeling is with respect to
      planetary system barcyenter execpt for Earth and Moon which are with
      respect to the body center. When using SPICE as the
      <guilabel>EphemerisSource</guilabel>, modeling is with respect to the
      NaifId defined on the body.</para>
    </warning>

    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata align="center" contentdepth="100%"
                     fileref="files/images/Resource_SolarSystem_GUI_2.png"
                     scalefit="1" width="100%"/>
        </imageobject>
      </mediaobject>
    </screenshot>

    <para>If you select <guilabel>SPICE</guilabel> for <guilabel>Ephemeris
    Source</guilabel>, the <guilabel>SolarSystem</guilabel> dialog box
    reconfigures to disable the <guilabel>Ephemeris Filename</guilabel>
    option, indicating that this is no longer used in this mission..</para>
  </refsection>

  <refsection>
    <title>Remarks</title>

    <para>GMAT uses the ephemeris file selected in the
    <guilabel>EphemerisSource</guilabel> field for all built-in celestial
    bodies. For user-defined bodies, the ephemeris model is specified on the
    <guilabel>CelestialBody</guilabel> object.</para>

    <itemizedlist>
      <listitem>
        <para>For more information on the DE files provided by JPL see <link
        xlink:href="http://iau-comm4.jpl.nasa.gov/README">here</link>.</para>
      </listitem>

      <listitem>
        <para>For general information on SPICE ephemeris files see the <link
        xlink:href="http://naif.jpl.nasa.gov/naif/toolkit.html">JPL NAIF
        site</link>.</para>
      </listitem>

      <listitem>
        <para>For information on the SPK kernel named
        <literal>DE???AllPlanets.bsp</literal> distributed with GMAT, see the
        <filename>Readme-DE???AllPlanets.txt</filename> files located in
        <literal>\data\planetary_ephem\spk</literal> in the GMAT
        distribution.</para>
      </listitem>
    </itemizedlist>

    <para>Note: The <guilabel>SolarSystem</guilabel> and built-in
    <guilabel>CelestialBody</guilabel> resources require several hundred
    fields for full configuration. GMAT only saves non-default values for
    <guilabel>SolarSystem</guilabel> and <guilabel>CelestialBody</guilabel> to
    the script so that scripts are not populated with hundreds of default
    settings.</para>

    <refsection>
      <title>GMAT Support for ICRF Solar System Ephemeris Files</title>

      <para>JPL planetary ephemeris files from DE400 and later are referenced
      to the International Celestial Reference Frame (ICRF), which is not
      precisely equivalent to the J2000 reference frame. The distinction
      between ICRF and J2000 is not relevant for most orbits, most
      particularly those in the near-Earth region. However, users should be
      aware that GMAT currently treats ICRF solar system ephemeris states as
      J2000 and therefore users may encounter inconsistency between GMAT and
      other systems that perform ICRF to J2000 transformations of the solar
      system ephemeris.</para>
    </refsection>

    <refsection>
      <title>Modeling Additional Solar System Bodies</title>

      <para>The planetary ephemeris files delivered with GMAT include most
      solar system planets, but do not include the natural satellites of
      planets. It is possible to model the moons of Jupiter, Saturn, and other
      planets in GMAT, but the user must obtain the ephemeris data for these
      bodies from external sources. The most convenient method for this is to
      obtain appropriate SPICE ephemeris files from the JPL NAIF website (look
      for "Generic Kernels"), and then use that SPICE file as the
      <guilabel>OrbitSpiceKernelName</guilabel> for a new instance of
      <guilabel>CelestialBody</guilabel>. An example of this process is shown
      for Saturn's moon Titan in the examples section for
      <xref linkend="CelestialBody"/>.</para>
    </refsection>
  </refsection>

  <refsection>
    <title>Examples</title>

    <informalexample>
      <para>Use <guilabel>DE421</guilabel> for ephemeris.</para>

      <programlisting><code>GMAT SolarSystem.EphemerisSource = 'DE421'

Create Spacecraft aSpacecraft
Create Propagator aPropagator
aPropagator.FM = aForceModel
Create ForceModel aForceModel
aForceModel.PointMasses = {Luna, Sun}

BeginMissionSequence

Propagate aPropagator(aSpacecraft) {aSpacecraft.ElapsedSecs = 12000.0}</code></programlisting>
    </informalexample>

    <informalexample>
      <para>Use <guilabel>SPICE</guilabel> for ephemeris.</para>

      <programlisting><code>GMAT SolarSystem.EphemerisSource = 'SPICE'

Create Spacecraft aSpacecraft
Create Propagator aPropagator
aPropagator.FM = aForceModel
Create ForceModel aForceModel
aForceModel.PointMasses = {Luna, Sun}

BeginMissionSequence

Propagate aPropagator(aSpacecraft) {aSpacecraft.ElapsedSecs = 12000.0}</code>      </programlisting>
    </informalexample>
  </refsection>
</refentry>
