<?xml version="1.0" encoding="UTF-8"?>
<refentry version="5.0" xml:id="FieldOfView"
          xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:xi="http://www.w3.org/2001/XInclude"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:m="http://www.w3.org/1998/Math/MathML"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:db="http://docbook.org/ns/docbook">
  <indexterm>
    <primary>FieldOfView</primary>
  </indexterm>

  <refmeta>
    <refentrytitle>FieldOfView</refentrytitle>

    <refmiscinfo class="source">GMAT</refmiscinfo>

    <refmiscinfo class="manual">Resources</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname><guilabel>Field-Of-View</guilabel></refname>

    <refpurpose>Models the mask, or field-of-view, of a hardware
    <guilabel>Resource</guilabel>.</refpurpose>
  </refnamediv>

  <refsection>
    <title>Description</title>

    <para>GMAT supports three field-of-view <guilabel>Resources</guilabel>
    including <guilabel>ConicalFOV</guilabel>,
    <guilabel>RectangularFOV</guilabel>, and <guilabel>CustomFOV</guilabel>.
    These <guilabel>Resources</guilabel> are used to model masks of sensors
    and antenna (in graphics currently) and can be added to the selected
    hardware <guilabel>Resources</guilabel>. See the
    <guilabel>Remarks</guilabel> section for a detailed discussion of each
    field-of-view <guibutton>Resource</guibutton>.</para>

    <para><phrase role="ref_seealso">See Also</phrase>: <xref
    linkend="Antenna"/></para>
  </refsection>

  <refsection xml:id="FieldOfView_Resource_Fields">
    <title>Fields</title>

    <informaltable colsep="0" frame="topbot">
      <tgroup cols="2">
        <colspec colnum="1" colwidth="1.0*"/>

        <colspec colnum="2" colwidth="3*"/>

        <thead>
          <row>
            <entry>Field</entry>

            <entry>Description</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><guilabel>Alpha</guilabel></entry>

            <entry><para>The transparency of the sensor field-of-view in the
            graphics display. </para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Integer</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>0 to 255. 0 represents fully transparent, 255
                    represents fully opaque.</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>AngleWidth</guilabel></entry>

            <entry><para>Maximum clock angle distance from reference point (+X
            axis of Hardware coordinate frame) for points in the field of
            view. Only applies to <guilabel>RectangularFOV</guilabel>
            <guilabel>Resource.</guilabel></para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>0 to 180</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>30</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>AngleHeight</guilabel></entry>

            <entry><para>Maximum cone angle distance from the boresight (+Z
            axis of Hardware coordinate frame) for points within the field of
            view. Only applies to <guilabel>RectangularFOV</guilabel>
            <guilabel>Resource.</guilabel></para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>0 to 90</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>10</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>degrees</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>Azimuth</guilabel></entry>

            <entry><para>Array containing azimuth angles for each point on the
            perimeter of the field of view. This array is used in conjunction
            with either ConeAngles or Elevation. Only applies to
            <guilabel>CustomFOV</guilabel>
            <guilabel>Resource.</guilabel></para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real array, each element is in the range 0 to
                    360.</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set,</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>empty array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>Degrees</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>ClockAngles</guilabel></entry>

            <entry><para>Array containing cone angles for each point on the
            perimeter of the field of view. This array is used in conjunction
            with ClockAngles. Only applies to <guilabel>CustomFOV</guilabel>
            <guilabel>Resource.</guilabel></para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real array, each element is in the range -180 to
                    180.</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set,</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>empty array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>Degrees</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>Color</guilabel></entry>

            <entry><para>The color of the sensor field-of-view displayed in
            graphics.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Integer array or string</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Valid predefined color or a triplet of integers
                    representing a red, green or blue value ranging from 0 to
                    255.</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>[0 0 0] or Black</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>ConeAngles</guilabel></entry>

            <entry><para>Array containing cone angles for each point on the
            perimeter of the field of view. This array is used in conjunction
            with ClockAngles. Only applies to <guilabel>CustomFOV</guilabel>
            <guilabel>Resource.</guilabel></para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>RealArray, each element is in the range 0 to
                    180</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>empty array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>Degrees</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>Elevation</guilabel></entry>

            <entry><para>Array containing elevation angles for each point on
            the perimeter of the field of view. Note that the elevation is
            relative to the plane tangent to the sensor's boresight
            direction.This array is used in conjunction with either Azimuth or
            ClockAngles. Only applies to <guilabel>CustomFOV</guilabel>
            <guilabel>Resource.</guilabel></para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>RealArray, each element is in the range -90 to
                    90</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>empty array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>Degrees</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>FieldOfViewAngle</guilabel></entry>

            <entry><para>The half angle of the conical sensor vield of view.
            Only applies to <guilabel>ConicalFOV</guilabel>
            <guilabel>Resource.</guilabel></para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>0 &lt; <guilabel>FieldOfViewAngle</guilabel> &lt;=
                    90</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>30</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>degrees</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>FOVFileName</guilabel></entry>

            <entry><para>Name and path to FOV file. Only applies to
            <guilabel>CustomFOV</guilabel>
            <guilabel>Resource.</guilabel></para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Text file containing a valid cone angle and clock
                    angle on each row.</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>none</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>Angles are in degrees.</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>InterpolationStepSize</guilabel></entry>

            <entry><para>Size of steps to take when performing spherical
            linear interpolation for a mask file. May be set to 0.0 to
            disable. Only applies to <guilabel>CustomFOV</guilabel> and only
            when using Azimuth and Elevation to define the
            angles.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>0.0 or value between or equal to 0.2 and
                    180.0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0.2 degrees</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>Angles are in degrees.</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </refsection>

  <refsection>
    <title>Remarks</title>

    <para>Field-of-view objects define the sensor mask (a representation of
    the perimeter of the field of view) for use in graphics applications.
    Future versions of GMAT will determine if a given vector (e.g., the
    spacecraft-to-Sun vector) is in the sensor field of view.</para>

    <note>
      <para>The configuration of a sensor location and orientation in the body
      frame is configured on the <guilabel>Antenna</guilabel>
      <guilabel>Resource</guilabel>. The orientation of the hardware object in
      the spacecraft body frame and the spacecraft attitude is used to perform
      the rotations of vectors between a reference frame and a hardware
      coordinate frame. By convention a sensor boresight is the +Z axis of the
      sensor coordinate frame.</para>
    </note>

    <refsection>
      <title>Configuring a ConicalFOV</title>

      <para>A <guilabel>ConicalFOV</guilabel> object models a conical field of
      view, which can be represented by its cone angle; the angle between the
      boresight and the edge of the field of view. This angle remains
      constant, and the field of view mask can be thought of as a circle on
      the unit sphere.</para>

      <informalexample>
        <para>Configure a ConicalFOV.</para>

        <programlisting><code>% Create the ConicalFOV object
Create ConicalFOV cone1;
cone1.FieldOfViewAngle = 60;
cone1.Color = Blue;
cone1.Alpha = 255;  %the field of view is fully opaque

% Attach the FOV object to an antenna
Create Antenna antenna1;
antenna1.FieldOfView = cone1;
</code></programlisting>
      </informalexample>
    </refsection>

    <refsection>
      <title>Configuring a RectangularFOV</title>

      <para>The <guilabel>RectangularFOV</guilabel>
      <guilabel>Resource</guilabel> models a field-of-view where the 4 corners
      are defined by the angular width and height limits.A RectangularFOV
      object models a field of view defined by limits on cone angle and and
      clock angle. A (cone angle, clock angle) pair defines a point on the
      unit sphere. Unlike a conical sensor, which assumes the cone angle is
      uniform for all clock angles, the cone angle is measured along a “prime
      meridian” lying in the X-Z plane of the Hardware coordinate frame. A
      positive cone angle is measured towards the +X axis, a negative cone
      angle is measured towards the -X axis.</para>

      <informalexample>
        <para>Configure a RectangularFOV.</para>

        <programlisting><code>% Create the RectangularFOV object
Create RectangularFOV box1;
box1.AngleHeight = 20;
box1.AngleWidth  = 50;
box1.Color = [255 255 0];  % Yellow
box1.Alpha = 255;  %the field of view is fully opaque

% Attach the FOV object to an antenna
Create Antenna antenna1;
antenna1.FieldOfView = cone1;
</code></programlisting>
      </informalexample>
    </refsection>

    <refsection>
      <title>Configuring a CustomFOV</title>

      <para>The <guilabel>CustomFOV</guilabel> models the field of view’s
      perimeter as a sequence of points on the unit sphere, represented by a
      (cone, clock) or (azimuth, elevation) pair of angles. A CustomFOV can be
      used to model an irregular sensor field of view. Note that cone angles
      are measured relative to the zenith direction and elevation angles are
      measured relative to the horizontal plane.</para>

      <para>There are two ways GMAT will determine the boundaries of a FOV
      between two defined points.</para>

      <orderedlist>
        <listitem>
          <para>GMAT will treat the FOV as a polyhedron, with the boundary
          between the two points defined by the plane created from the two
          points and the origin. This approach is used if the FOV points are
          defined using Cone and Clock angles or if InterpolationStepSize =
          0</para>
        </listitem>

        <listitem>
          <para>GMAT will linearly interpolate between the elevation angles of
          the FOV at azimuth steps from 0 to 360 at steps defined by
          InterpolationStepSize. This approach is used if the FOV points are
          defined using Azimuth and Elevation angles and InterpolationStepSize
          is non-zero, having a default value of 0.2 degrees for
          InterpolationStepSize. The final mask will be the union of the user
          defined set of points and the points created by the
          interpolation</para>
        </listitem>
      </orderedlist>

      <warning>
        <para>The CustomFOV uses the Jordan Curve Thereom to determine if a
        point is inside of a sensor. Future versions of GMAT will expose that
        interface to provide sensor coverage computations. It is important
        that no line segments in a CustomFOV cross one another.</para>
      </warning>

      <informalexample>
        <para>Configure a CustomFOV.</para>

        <programlisting><code>% Create a CustomFOV from a text file of cone and clock angles
Create CustomFOV fov;
fov.FOVFileName = 'ConeClockAngles.txt';

% ... or alternatively, create a CustomFOV by 
fov.ClockAngles = [ 15.0 25.0 35.0];
fov.ConeAngles  = [ 30.0 45.0 60.0];

% ... or alternatively, create an equivalent CustomFOV by 
fov.Azimuth    = [ 15.0 25.0 35.0];
fov.Elevation  = [ 60.0 45.0 30.0];

% Attach the FOV object to an antenna
Create Antenna antenna1;
antenna1.FieldOfView = fov;</code></programlisting>

        <para>The example below contains contents of the mask file for the
        example above. The mask file consists of pairs of clock and cone
        angles in degrees. Clock and cone angles pairs are on a row with the
        clock angle first and the cone angle second. The keyword
        <literal>ClockConeAngles</literal> specifies that the angle pairs are
        clock and cone angles. Alternatively, the user may specify azimuth and
        elevation angles by using the
        <literal>AzimuthElevationAngles</literal> keyword. An angle type
        keyword must be present in the file.</para>

        <programlisting><code>ClockConeAngles

15.0  30.0
25.0  45.0
35.0  60.0
</code></programlisting>
      </informalexample>
    </refsection>
  </refsection>
</refentry>
