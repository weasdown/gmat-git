<?xml version="1.0" encoding="UTF-8"?>
<refentry version="5.0" xml:id="Antenna" xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:xi="http://www.w3.org/2001/XInclude"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:m="http://www.w3.org/1998/Math/MathML"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:db="http://docbook.org/ns/docbook">
  <indexterm>
    <primary>Antenna</primary>
  </indexterm>

  <refmeta>
    <refentrytitle>Antenna</refentrytitle>

    <refmiscinfo class="source">GMAT</refmiscinfo>

    <refmiscinfo class="manual">Resources</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>Antenna</refname>

    <refpurpose>Transmits or receives an RF signal.</refpurpose>
  </refnamediv>

  <refsection>
    <title>Description</title>

    <para>A number of GMAT resources including
    <guilabel>Spacecraft</guilabel>, <guilabel>GroundStation</guilabel>,
    <guilabel>Transponder</guilabel>, <guilabel>Receiver</guilabel>, and
    <guilabel>Transmitter</guilabel>, use an <guilabel>Antenna</guilabel>
    resource to transmit and/or receive RF signals.</para>

    <note>
      <para>Currently, none of the <guilabel>Antenna</guilabel> parameters
      have any effect on orbit determination processing and do not need to be
      set for orbit estimation. (e.g., Light time solutions do not currently
      take into account <guilabel>Antenna</guilabel> location within the
      spacecraft body.)</para>
    </note>

    <para><phrase role="ref_seealso">See Also</phrase>: <xref
    linkend="GroundStation"/>, <xref linkend="Transponder"/>, <xref
    linkend="Receiver"/>, <xref linkend="Transmitter"/></para>
  </refsection>

  <refsection>
    <title>Fields</title>

    <informaltable colsep="0" frame="topbot">
      <tgroup cols="2">
        <colspec colnum="1" colwidth="1.5*"/>

        <colspec colnum="2" colwidth="3*"/>

        <thead>
          <row>
            <entry>Field</entry>

            <entry>Description</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><guilabel>FieldOfView</guilabel></entry>

            <entry><para>Reference to optional field-of-view object which
            models the area visible to the antenna. </para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>FOV Resource</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para><guilabel>CustomFOV</guilabel>,
                    <guilabel>ConicalFOV</guilabel>, or
                    <guilabel>RectantularFOV</guilabel> Resource.</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>empty</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>DirectionX</guilabel></entry>

            <entry><para>X-component of the field-of-view boresight vector
            expressed in spacecraft body coordinates. </para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real number</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>1</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>DirectionY</guilabel></entry>

            <entry><para>Y-component of the field-of-view boresight vector
            expressed in spacecraft body coordinates. </para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real number</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>DirectionZ</guilabel></entry>

            <entry><para>Z-component of the field-of-view boresight vector
            expressed in spacecraft body coordinates. </para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real number</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>SecondDirectionX</guilabel></entry>

            <entry><para>X-component of the vector, expressed in the body
            frame, used to resolve the sensor's orientation about the boresite
            vector. </para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>SecondDirectionY</guilabel></entry>

            <entry><para>Y-component of the vector, expressed in the body
            frame, used to resolve the sensor's orientation about the boresite
            vector. </para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>1</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>SecondDirectionZ</guilabel></entry>

            <entry><para>Z-component of the vector, expressed in the body
            frame, used to resolve the sensor's orientation about the boresite
            vector. </para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>HWOriginInBCSX</guilabel></entry>

            <entry><para>X-component of the origin of the antenna’s coordinate
            system expressed in the spacecraft’s body coordinate
            system.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>HWOriginInBCSY</guilabel></entry>

            <entry><para>Y-component of the origin of the antenna’s coordinate
            system expressed in the spacecraft’s body coordinate system.
            </para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>HWOriginInBCSZ</guilabel></entry>

            <entry><para>Z-component of the origin of the antenna’s coordinate
            system expressed in the spacecraft’s body coordinate
            system.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </refsection>

  <refsection>
    <title>Remarks</title>

    <para>The antenna model supports mask, orientation and location settings.
    The mask is provided by the object designated by
    <guilabel>FieldOfView</guilabel>. The location is the position of the
    origin of the sensor frame, expressed in the spacecraft body coordinate
    frame. The orientation is represented as a direction cosine matrix that is
    initially computed from two non-colinear vectors, provided by the user as
    <guilabel>Direction</guilabel> and <guilabel>SecondDirection</guilabel>
    components. The three axes for the sensor coordinate frame expressed in
    Body coordinates are computed as follow:</para>

    <orderedlist spacing="compact">
      <listitem>
        <para>Normalize <guilabel>z</guilabel> &amp; <guilabel>v</guilabel>,
        where <guilabel>z</guilabel> is the boresight represented by
        <guilabel>Direction</guilabel> and<guilabel> v</guilabel> is the
        <guilabel>SecondDirection</guilabel> vector.</para>
      </listitem>

      <listitem>
        <para>Compute the normal N = z x v and its magnitude m.</para>
      </listitem>

      <listitem>
        <para>Verify magnitude of <guilabel>N</guilabel> isn’t 0.0, send
        message if it is too close. This will happen if one of the input
        vectors is a zero vector or if the two vectors are co-linear,
        including the case where they point in opposite directions.</para>
      </listitem>

      <listitem>
        <para><guilabel>x</guilabel> = <guilabel>N</guilabel> / m</para>
      </listitem>

      <listitem>
        <para><guilabel>y</guilabel> = <guilabel>z</guilabel> x
        <guilabel>x</guilabel></para>
      </listitem>

      <listitem>
        <para>The rotation matrix <guilabel>R</guilabel>sb is constructed with
        <guilabel>x</guilabel> on the first row, <guilabel>y</guilabel> on the
        second, and <guilabel>z</guilabel> on the third. This matrix rotates
        vectors from the body frame to the sensor frame.</para>
      </listitem>
    </orderedlist>

    <para><guilabel>R</guilabel>sb is used as part of the chain checking if an
    object is in the field of view. The general approach is to have a vector
    from the antenna to the object in a given reference frame and do a series
    of rotations, the last of which would use <guilabel>R</guilabel>sb to
    rotate the vector from spacecraft to antenna coordinates.</para>
  </refsection>

  <refsection>
    <title>Examples</title>

    <informalexample>
      <para>Attach an <guilabel>Antenna</guilabel> to hardware,
      <guilabel>Spacecraft</guilabel> and <guilabel>GroundStation</guilabel>
      <guilabel>Resource</guilabel> types.</para>

      <programlisting><?db-font-size 75% ,?>Create Antenna SatTranponderAntenna 
Create Antenna DSNReceiverAntenna DSNTransmitterAntenna

Create Transponder SatTransponder;
SatTransponder.PrimaryAntenna = SatTranponderAntenna

Create Spacecraft Sat
Sat.AddHardware = {SatTransponder, SatTranponderAntenna};

Create Transmitter DSNTransmitter
DSNTransmitter.PrimaryAntenna = DSNTransmitterAntenna

Create Receiver DSNReceiver
DSNReceiver.PrimaryAntenna = DSNReceiverAntenna;

Create GroundStation DSN;
DSN.AddHardware =  {DSNTransmitter, DSNReceiver}
DSN.AddHardware =  {DSNTransmitterAntenna, DSNReceiverAntenna};
BeginMissionSequence;</programlisting>

      <para>Define the field-of-view, orientation, and location of an
      antenna.</para>

      <programlisting>% Define a conical FOV
Create ConicalFOV coneFOV;
GMAT coneFOV.FieldOfViewAngle = 20;

% Create an antenna and attache a FOV
Create Antenna myAntenna;
GMAT myAntenna.FieldOfView = coneFOV;

% Define the antenna boresight direction in body coordinates
GMAT myAntenna.DirectionX = 1;
GMAT myAntenna.DirectionY = 0;
GMAT myAntenna.DirectionZ = 0;

% Define the vector to resolve orientation about boresight
GMAT myAntenna.SecondDirectionX = 0;
GMAT myAntenna.SecondDirectionY = 1;
GMAT myAntenna.SecondDirectionZ = 0;

% Define the location of antenna in body coordinates
GMAT myAntenna.HWOriginInBCSX = 100;
GMAT myAntenna.HWOriginInBCSY = -100;
GMAT myAntenna.HWOriginInBCSZ = 0;
</programlisting>
    </informalexample>
  </refsection>
</refentry>
