<?xml version="1.0" encoding="UTF-8"?>
<refentry version="5.0" xml:id="RejectFilter"
          xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:xi="http://www.w3.org/2001/XInclude"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:m="http://www.w3.org/1998/Math/MathML"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:db="http://docbook.org/ns/docbook">
  <indexterm>
    <primary>RejectFilter</primary>
  </indexterm>

  <indexterm>
    <primary>Tracking Data</primary>

    <secondary>Filtering</secondary>
  </indexterm>

  <refmeta>
    <refentrytitle>RejectFilter</refentrytitle>

    <refmiscinfo class="source">GMAT</refmiscinfo>

    <refmiscinfo class="manual">Resources</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>RejectFilter</refname>

    <refpurpose>Allows selection of data subsets for processing by the batch
    least squares estimator.</refpurpose>
  </refnamediv>

  <refsection>
    <title>Description</title>

    <para>The <guilabel>RejectFilter</guilabel> object is used to create
    criteria for the exclusion of subsets of the available data in the
    estimation process based on tracker, observed object, measurement type, or
    time. Instances of <guilabel>RejectFilter</guilabel> are specified for use
    on the <guilabel>DataFilters</guilabel> field of a
    <guilabel>TrackingFileSet</guilabel> or
    <guilabel>BatchEstimator</guilabel> object.</para>

    <para>GMAT implements two levels of data editing for estimation.
    First-level editing criteria are specified on the
    <guilabel>DataFilters</guilabel> field of the
    <guilabel>TrackingFileSet</guilabel> instance. At this level, the user may
    choose what data is admitted into the overall pool of observations
    provided to the estimator. Any data excluded at the tracking file set
    level will be immediately discarded and not available to the estimation
    process.</para>

    <para>Second-level data editing is specified on the
    <guilabel>DataFilters</guilabel> field of the
    <guilabel>BatchEstimator</guilabel> instance. At this level, the user may
    choose what data is used in the estimation state update. Residuals will be
    computed for any observations admitted through first-level editing, but
    any data excluded at the estimator level will be flagged as user edited,
    and will not affect the computation of the state correction. This allows
    the user to evaluate the quality of untrusted data against a solution
    computed using a trusted set of measurements.</para>

    <para>A single reject filter may employ multiple selection criteria (for
    example simultaneous thinning by time and tracker). Multiple criteria on a
    single filter are considered in an AND sense. When multiple criteria are
    specified in a single filter, an observation must meet all specified
    criteria to be rejected. Multiple filters with different selection
    criteria may be specified on a single <guilabel>TrackingFileSet</guilabel>
    or <guilabel>BatchEstimator</guilabel>. When multiple filters are
    specified, these act in an OR sense. Data meeting criteria for any of the
    specified filters will be rejected.</para>

    <para>See Also <xref linkend="AcceptFilter"/>, <xref
    linkend="TrackingFileSet"/>, <xref linkend="BatchEstimator"/></para>
  </refsection>

  <refsection>
    <title>Fields</title>

    <informaltable colsep="0" frame="topbot">
      <tgroup cols="2">
        <colspec colnum="1" colwidth="1.0*"/>

        <colspec colnum="2" colwidth="3*"/>

        <thead>
          <row>
            <entry>Field</entry>

            <entry>Description</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><guilabel>DataTypes</guilabel></entry>

            <entry><para>List of data types</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String Array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>A set of any supported GMAT measurement types, or
                    'All'</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>{All}</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>EpochFormat</guilabel></entry>

            <entry><para>Allows user to select format of the
            epoch</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>UTCGregorian, UTCModJulian, TAIGregorian,
                    TAIModJulian, TTGregorian, TTModJulian A1Gregorian,
                    A1ModJulian, TDBGregorian, TDBModJulian</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>TAIModJulian</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>FileNames</guilabel></entry>

            <entry><para>List of file names (a subset of the relevant
            <guilabel>TrackingFileSet's</guilabel>
            <guilabel>FileName</guilabel> field) containing the tracking data,
            to be excluded from processing. This field is only applicable when
            the <guilabel>RejectFilter</guilabel> is used on a
            <guilabel>TrackingFileSet</guilabel>.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>StringArray</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>valid file name or 'All'</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>{All}</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>FinalEpoch</guilabel></entry>

            <entry><para>Final epoch of desired data to
            process.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>any valid epoch</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>latest day defined in
                    GMAT</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>InitialEpoch</guilabel></entry>

            <entry><para>Initial epoch of desired data to
            process.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>any valid epoch</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>earliest day defined in
                    GMAT</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>ObservedObjects</guilabel></entry>

            <entry><para>List of user-created tracked objects (e.g., name of
            the <guilabel>Spacecraft</guilabel> resource being
            tracked).</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Object Array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>User defined observed object or 'All'</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>{All}</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>RecordNumbers</guilabel></entry>

            <entry><para>A list of one or more single record numbers or spans
            of record numbers to reject. Observation record numbers are
            reported in the GMAT estimator output file. This field is only
            applicable when the <guilabel>RejectFilter</guilabel> is used on
            the estimator level.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Integers or spans of integers (see examples)</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>{}</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>Trackers</guilabel></entry>

            <entry><para>List of user-created trackers (e.g., name of the
            <guilabel>GroundStation</guilabel> resource being
            used).</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Object Array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>any valid user-created Tracker object (e.g.,
                    <guilabel>GroundStation</guilabel>) or 'All'</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>{All}</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </refsection>

  <refsection>
    <title>Remarks</title>

    <para>Some fields of <guilabel>RejectFilter</guilabel> are not applicable
    at either the first-level (tracking file set) or second-level (estimator)
    editing stages. The <guilabel>RecordNumbers</guilabel> field has no
    functionality when applied to a reject filter at the tracking file set
    level. The <guilabel>FileNames</guilabel> field has no functionality when
    applied to a reject filter at the estimator level.</para>

    <para>Use of combinations of instances <guilabel>AcceptFilter</guilabel>
    and <guilabel>RejectFilter</guilabel> at both levels is permitted.</para>
  </refsection>

  <refsection>
    <title>Examples</title>

    <refsection>
      <title>First-level (TrackingFileSet) Data Editing</title>

      <para>The following examples illustrate use of a
      <guilabel>RejectFilter</guilabel> for first-level data editing. At this
      level, the <guilabel>RejectFilter</guilabel> instance should be assigned
      to the <guilabel>DataFilters</guilabel> field of a
      <guilabel>TrackingFileSet</guilabel>. In these examples, data meeting
      the criteria specified by the reject filter will be immediately
      discarded. All other data is admitted.</para>

      <informalexample>
        <para>This example shows how to create a
        <guilabel>RejectFilter</guilabel> to reject all observations from
        station <guilabel>GDS</guilabel>.</para>

        <programlisting>Create GroundStation GDS;
Create RejectFilter rf;

rf.Trackers = {'GDS'};
 
Create TrackingFileSet estData;
 
estData.DataFilters = {rf};

BeginMissionSequence;</programlisting>
      </informalexample>

      <informalexample>
        <para>The next example will reject all DSN Doppler (i.e., DSN_TCP)
        tracking measurements from station <guilabel>GDS</guilabel>, and all
        tracking of any type from station <guilabel>CAN</guilabel>. All other
        tracking measurements will be accepted.</para>

        <programlisting>Create GroundStation GDS CAN;

Create RejectFilter rf1;
Create RejectFilter rf2;
 
rf1.Trackers  = {'GDS'}; 
rf1.DataTypes = {'DSN_TCP'};
rf2.Trackers  = {'CAN'};
 
Create TrackingFileSet estData;
 
estData.DataFilters = {rf1, rf2};

BeginMissionSequence;</programlisting>
      </informalexample>
    </refsection>

    <refsection>
      <title>Second-level (estimator) Data Editing</title>

      <para>The following examples illustrate use of a
      <guilabel>RejectFilter</guilabel> for second-level data editing. At this
      level, the <guilabel>RejectFilter</guilabel> instance should be assigned
      to the <guilabel>DataFilters</guilabel> field of a
      <guilabel>BatchEstimator</guilabel>. In these examples, data meeting the
      criteria specified by the reject filter will excluded from the
      estimation state update. Residuals will be computed for all available
      data (all data admitted at the first level), but data rejected at the
      estimator level will be flagged as user edited.</para>

      <informalexample>
        <para>This example shows how to create a
        <guilabel>RejectFilter</guilabel> to reject specific observations by
        record number.</para>

        <programlisting>Create RejectFilter rf;

rf.RecordNumbers = {13, 25, 75-87};
 
Create BatchEstimator bls;
 
bls.DataFilters = {rf};

BeginMissionSequence;</programlisting>
      </informalexample>

      <informalexample>
        <para>The next example shows how to simultaneously employ multiple
        reject filters. In this example:</para>

        <itemizedlist>
          <listitem>
            <para>MAD range data over the span 10 Jun 2012 02:56 to 13:59 is
            rejected</para>
          </listitem>

          <listitem>
            <para>All CAN DSN_TCP data is rejected</para>
          </listitem>

          <listitem>
            <para>All RangeRate data (from any station) is rejected</para>
          </listitem>
        </itemizedlist>

        <programlisting>Create RejectFilter rf1 rf2 rf3;
Create GroundStation MAD CAN;

rf1.Trackers     = {'MAD'};
rf1.DataTypes    = {'Range'};
rf1.EpochFormat  = UTCGregorian;
rf1.InitialEpoch = '10 Jun 2012 02:56:00.000';
rf1.FinalEpoch   = '10 Jun 2012 13:59:00.000';

rf2.Trackers     = {'CAN'};
rf2.DataTypes    = {'DSN_TCP'};

rf3.DataTypes    = {'RangeRate'};

Create BatchEstimator bls;

bls.DataFilters = {rf1, rf2, rf3};

BeginMissionSequence;</programlisting>
      </informalexample>
    </refsection>
  </refsection>
</refentry>
