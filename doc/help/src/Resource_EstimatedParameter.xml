<?xml version="1.0" encoding="UTF-8"?>
<refentry version="5.0" xml:id="EstimatedParameter"
          xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:xi="http://www.w3.org/2001/XInclude"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:m="http://www.w3.org/1998/Math/MathML"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:db="http://docbook.org/ns/docbook">
  <indexterm>
    <primary>Estimated parameter</primary>
  </indexterm>

  <indexterm>
    <primary>ExtendedKalmanFilter</primary>

    <secondary>Estimation parameter modeling</secondary>
  </indexterm>

  <indexterm>
    <primary>Drag</primary>

    <secondary>Drag estimation in orbit determination</secondary>
  </indexterm>

  <refmeta>
    <refentrytitle>EstimatedParameter</refentrytitle>

    <refmiscinfo class="source">GMAT</refmiscinfo>

    <refmiscinfo class="manual">Resources</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>EstimatedParameter</refname>

    <refpurpose>Used for modeling of dynamically estimated parameters in the
    Extended Kalman Filter.</refpurpose>
  </refnamediv>

  <refsection>
    <title>Description</title>

    <para>The <guilabel>EstimatedParameter</guilabel> resource allows the user
    to model dynamic parameters such as coefficient of drag (Cd), coefficient
    of solar radiation pressure (Cr), as well as observation biases as random
    processes in the Kalman filter. This resource currently implements only a
    first-order Gauss-Markov process. A user-configured instance of
    <guilabel>EstimatedParameter</guilabel> resource is assigned to the
    <guilabel>Spacecraft.SolveFors</guilabel> list to enable estimation using
    the modeled process.</para>

    <para>The only solve-fors currently supported are spacecraft coefficient
    of drag (Cd) and atmospheric density scale factor
    (AtmosDensityScaleFactor). The <guilabel>EstimatedParameter</guilabel>
    resource is for the Kalman filter only and may not be used with the
    BatchEstimator.</para>

    <para>See Also <xref linkend="ExtendedKalmanFilter"/>, <xref
    linkend="SpacecraftBallisticMass"/></para>
  </refsection>

  <refsection>
    <title>Fields</title>

    <informaltable colsep="0" frame="topbot">
      <tgroup cols="2">
        <colspec colwidth="1.0*"/>

        <colspec colwidth="3*"/>

        <thead>
          <row>
            <entry>Field</entry>

            <entry>Description</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><guilabel>HalfLife</guilabel></entry>

            <entry><para>The half-life in seconds for propagation of both the
            estimated parameter value and sigma (uncertainty). The model
            process noise is derived from the steady-state sigma and
            half-life. See the remarks below for more
            details.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real &gt; 0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Any positive Real number</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>Set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>7200</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>Seconds</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>Script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>Model</guilabel></entry>

            <entry><para>Name of the random process model.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>FirstOrderGaussMarkov</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>Set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>FirstOrderGaussMarkov</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>None</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>Script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>SolveFor</guilabel></entry>

            <entry><para>Name of the parameter to which the random process
            applies.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Cd, AtmosDensityScaleFactor</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>Set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>None</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>None</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>Script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>SteadyStateSigma</guilabel></entry>

            <entry><para>The steady-state parameter uncertainty. In the
            absence of measurements, the parameter uncertainty will return to
            this value. The model process noise is derived from the
            steady-state sigma and half-life. See the remarks below for more
            details.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real &gt; 0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>Set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>0.1</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>None</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>Script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>SteadyStateValue</guilabel></entry>

            <entry><para>The steady-state parameter value. In the absence of
            measurements, the parameter value will return to this value. This
            value may be different from the initial value of the parameter,
            which will be taken from the value of the chosen solve-for as
            assigned on the Spacecraft object. See Remarks below for more
            details.</para><variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real &gt;= 0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>Set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para><guilabel>1.0</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>None</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>Script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </refsection>

  <refsection>
    <title>Remarks</title>

    <note>
      <para>Creating an instance of <guilabel>EstimatedParameter</guilabel>
      that has the same name as a built-in solve for is not permitted. See
      <guilabel>SolveFors</guilabel> in <xref linkend="SpacecraftNavigation"/>
      for the list of built-in solve-for names.</para>
    </note>

    <note>
      <para>When creating an instance of
      <guilabel>EstimatedParameter</guilabel>, the <guilabel>Model</guilabel>
      parameter must be assigned first, before any other parameters of the
      estimated parameter. See the example below for a demonstration.</para>
    </note>

    <para>Selection of spacecraft dynamic solve-fors is specified in the
    <guilabel>Spacecraft</guilabel> resource <guilabel>SolveFors</guilabel>
    list. As noted under <xref linkend="SpacecraftNavigation"/>, there are
    specific keywords available to invoke estimation of dynamic parameters in
    both the batch estimator and filter. Using any of those predefined
    parameter names in the <guibutton>SolveFors</guibutton> list for a Kalman
    filter run invokes modeling of the parameter as a "random constant". In
    the random constant model, the estimated parameter and its uncertainty
    (sigma) both remain constant at their last estimated values during filter
    time updates. The random constant model does not add any process noise
    during propagation of the parameter estimate, and using this model can
    cause problems in the filter over time.</para>

    <para>To instead model the parameter as a first-order Gauss-Markov
    process, the user should configure an instance of
    <guibutton>EstimatedParameter</guibutton> for the desired dynamic
    solve-for, and assign the instance of
    <guibutton>EstimatedParameter</guibutton> in the
    <guibutton>Spacecraft</guibutton> <guibutton>SolveFors</guibutton> list,
    instead of using one of the predefined parameter names. See the Examples
    section below for details.</para>

    <para>When running the filter in cold-start mode, the nominal (a-priori)
    value and uncertainty of the selected estimated parameter are the values
    specified on the Spacecraft object. For example, if
    <guilabel>EstimatedParameter.SolveFor = 'Cd'</guilabel> is chosen, the
    initial value of Cd is the value assigned on the
    <guilabel>Spacecraft.Cd</guilabel> parameter and the initial uncertainty
    of Cd is assigned on the <guilabel>Spacecraft.CdSigma</guilabel>
    parameter. The parameter then propagates forward in time according to a
    first-order Gauss-Markov random process. When running the filter in
    warm-start mode (using a filter <guilabel>InputWarmStartFile</guilabel>),
    the initial parameter value and covariance are retrieved from the
    specified record in the warm start file.</para>
  </refsection>

  <refsection>
    <title>First-order Gauss-Markov Modeling</title>

    <para>The variance of the parameter process noise is derived from the
    user-specified <guilabel>SteadyStateSigma</guilabel> and
    <guilabel>HalfLife</guilabel>. The variance of the Gauss-Markov process
    noise, <inlineequation>
        <m:math display="inline">
          <m:msubsup>
            <m:mi>σ</m:mi>

            <m:mn>u</m:mn>

            <m:mn>2</m:mn>
          </m:msubsup>
        </m:math>
      </inlineequation> is related to the
    <guilabel>EstimatedParameter</guilabel>
    <guilabel>SteadyStateSigma</guilabel> by the following equation: <!--informalequation>
        <m:math xmlns="http://www.w3.org/1998/Math/MathML" alttext="upper S t e a d y upper S t a t e normal upper Sigma equals StartFraction tau dot sigma squared Over 2 EndFraction">
  <m:mstyle displaystyle="true" scriptminsize='12pt'>
    <m:mi>S</m:mi>
    <m:mi>t</m:mi>
    <m:mi>e</m:mi>
    <m:mi>a</m:mi>
    <m:mrow>
      <m:mi>d</m:mi>
      <m:mi>y</m:mi>
    </m:mrow>
    <m:mi>S</m:mi>
    <m:mi>t</m:mi>
    <m:mi>a</m:mi>
    <m:mi>t</m:mi>
    <m:mi>e</m:mi>
    <m:mi>S</m:mi>
    <m:mi>i</m:mi>
    <m:mi>g</m:mi>
    <m:mi>m</m:mi>
    <m:mi>a</m:mi>
    <m:mspace/>
    <m:mi> = </m:mi>
    <m:mspace/>
    <m:mfrac>
      <m:mrow>
        <m:mi>τ</m:mi>
        <m:msubsup>
          <m:mi>σ</m:mi>
            <m:mn>u</m:mn>
          <m:mn>2</m:mn>
        </m:msubsup>
      </m:mrow>
      <m:mn>2</m:mn>
    </m:mfrac>
  </m:mstyle>
</m:math>
      </informalequation--> <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata align="center" contentdepth="100%"
                       fileref="files/images/Resource_EstimatedParameter_SteadyStateSigma.png"
                       scalefit="1" width="100%"/>
          </imageobject>
        </mediaobject>
      </screenshot>where <emphasis>τ</emphasis> is related to the
    <guilabel>EstimatedParameter</guilabel> <guilabel>HalfLife</guilabel> by
    <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata align="center" contentdepth="100%"
                       fileref="files/images/Resource_EstimatedParameter_TauHalfLife.png"
                       scalefit="1" width="100%"/>
          </imageobject>
        </mediaobject>
      </screenshot></para>
  </refsection>

  <refsection>
    <title>Examples</title>

    <informalexample>
      <para>This example illustrates how to configure estimation of the
      spacecraft coefficient of drag as a first-order Gauss-Markov
      process.</para>

      <programlisting>%
%   Configure estimation of spacecraft coefficient of drag (Cd) 
%   as a first-order Gauss-Markov process.
%

Create EstimatedParameter FogmCd
 
FogmCd.Model            = 'FirstOrderGaussMarkov'; % Must be assigned first, before any other options
FogmCd.SolveFor         = 'Cd'
FogmCd.SteadyStateSigma = 0.1
FogmCd.HalfLife         = 7200

%
%   Use the configured instance of FogmCd in the spacecraft
%   SolveFors list, instead of the built-in 'Cd'
%

Create Spacecraft EstSat;

EstSat.DateFormat        = UTCGregorian;
EstSat.Epoch             = '10 Jun 2010 00:00:00.000'
EstSat.CoordinateSystem  = EarthMJ2000Eq
EstSat.DisplayStateType  = Cartesian
EstSat.X                 = 576.8
EstSat.Y                 = -5701.1
EstSat.Z                 = -4170.5
EstSat.VX                = -1.7645
EstSat.VY                = 4.1813
EstSat.VZ                = -5.9658
EstSat.DryMass           = 10
EstSat.Cd                = 1.75
EstSat.CdSigma           = 0.1
EstSat.Cr                = 1.8
EstSat.DragArea          = 100
EstSat.SRPArea           = 100
EstSat.Id                = 'LEOSat'
EstSat.AddHardware       = {GpsReceiver, GpsAntenna}
EstSat.SolveFors         = {CartesianState, FogmCd}
EstSat.ProcessNoiseModel = SNC
</programlisting>
    </informalexample>
  </refsection>
</refentry>
