<?xml version="1.0" encoding="UTF-8"?>
<refentry version="5.0" xml:id="AcceptFilter"
          xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:xi="http://www.w3.org/2001/XInclude"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:m="http://www.w3.org/1998/Math/MathML"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:db="http://docbook.org/ns/docbook">
  <indexterm>
    <primary>AcceptFilter</primary>
  </indexterm>

  <indexterm>
    <primary>Tracking Data</primary>
    <secondary>Filtering</secondary>
  </indexterm>

  <refmeta>
    <refentrytitle>AcceptFilter</refentrytitle>

    <refmiscinfo class="source">GMAT</refmiscinfo>

    <refmiscinfo class="manual">Resources</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>AcceptFilter</refname>

    <refpurpose>Allows selection of data subsets for processing by the batch
    least squares estimator.</refpurpose>
  </refnamediv>

  <refsection>
    <title>Description</title>

    <para>The <guilabel>AcceptFilter</guilabel> object is used to create
    criteria for the inclusion of subsets of the available data in the
    estimation process based on observation frequency, tracker, measurement
    type, record number, or time. Instances of
    <guilabel>AcceptFilter</guilabel> are specified for use on the
    <guilabel>DataFilters</guilabel> field of a
    <guibutton>TrackingFileSet</guibutton> or
    <guilabel>BatchEstimator</guilabel> object.</para>

    <para>GMAT implements two levels of data editing for estimation.
    First-level editing criteria are specified on the
    <guilabel>DataFilters</guilabel> field of the
    <guilabel>TrackingFileSet</guilabel> instance. At this level, the user may
    choose what data is admitted into the overall pool of observations
    provided to the estimator. Any data excluded at the tracking file set
    level will be immediately discarded and not available to the estimation
    process.</para>

    <para>Second-level data editing is specified on the
    <guilabel>DataFilters</guilabel> field of the
    <guilabel>BatchEstimator</guilabel> instance. At this level, the user may
    choose what data is used in the estimation state update. Residuals will be
    computed for any observations admitted through first-level editing, but
    any data excluded at the estimator level will be flagged as user edited,
    and will not affect the computation of the state correction. This allows
    the user to evaluate the quality of untrusted data against a solution
    computed using a trusted set of measurements.</para>

    <para>A single <guilabel>AcceptFilter</guilabel> may employ multiple
    selection criteria (for example simultaneously thinning different stations
    or data types by differing intervals). Multiple criteria on a single
    filter are considered in an AND sense. When multiple criteria are
    specified on a single filter, an observation must meet all specified
    criteria to be accepted.</para>

    <para>Multiple <guilabel>AcceptFilters</guilabel> with different selection
    criteria may be specified on a single <guilabel>TrackingFileSet</guilabel>
    or <guilabel>BatchEstimator</guilabel>. When multiple filters are
    specified, these act in an OR sense. Data meeting criteria for any of the
    specified filters will be accepted.</para>

    <para>See Also <xref linkend="RejectFilter"/>, <xref
    linkend="TrackingFileSet"/>, <xref linkend="BatchEstimator"/></para>
  </refsection>

  <refsection>
    <title>Fields</title>

    <informaltable colsep="0" frame="topbot">
      <tgroup cols="2">
        <colspec colnum="1" colwidth="1.0*"/>

        <colspec colnum="2" colwidth="3*"/>

        <thead>
          <row>
            <entry>Field</entry>

            <entry>Description</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry><guilabel>DataTypes</guilabel></entry>

            <entry><para>List of data types</para> <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String Array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>A set of any supported GMAT measurement types, or
                    'All'</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>{All}</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>EpochFormat</guilabel></entry>

            <entry><para>Allows user to select format of the epoch</para>
            <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>UTCGregorian, UTCModJulian, TAIGregorian,
                    TAIModJulian, TTGregorian, TTModJulian A1Gregorian,
                    A1ModJulian, TDBGregorian, TDBModJulian</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>TAIModJulian</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>FileNames</guilabel></entry>

            <entry><para>List of file names (a subset of the relevant
            <guilabel>TrackingFileSet's</guilabel>
            <guilabel>FileName</guilabel> field) containing the tracking data.
            If this field equals From_AddTrackingConfig, then two things
            happen; (1) All of the files in the relevant
            <guilabel>TrackingFileSet</guilabel> are used as a starting point,
            and (2) Of the data in all of the files, only the data defined by
            the <guilabel>AddTrackingConfig</guilabel> field of the relevant
            <guilabel>TrackingFileSet</guilabel> are used. This field is only
            applicable when the <guilabel>AcceptFilter</guilabel> is used on a
            <guilabel>TrackingFileSet</guilabel>.</para> <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>StringArray</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>valid file name, 'All', or
                    'From_AddTrackingConfig'</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>{All}</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>FinalEpoch</guilabel></entry>

            <entry><para>Final epoch of desired data to process</para>
            <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>any valid epoch</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>latest day defined in GMAT</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>InitialEpoch</guilabel></entry>

            <entry><para>Initial epoch of desired data to process</para>
            <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>any valid epoch</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>earliest day defined in GMAT</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>ObservedObjects</guilabel></entry>

            <entry><para>List of user-created tracked objects (e.g., name of
            the <guilabel>Spacecraft</guilabel> resource being tracked)</para>
            <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Object Array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>User defined observed object or 'All'</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>{All}</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>RecordNumbers</guilabel></entry>

            <entry><para>A list of one or more single record numbers or spans
            of record numbers to accept. Observation record numbers are
            reported in the GMAT estimator output file. This field is only
            applicable when the <guilabel>AcceptFilter</guilabel> is used on
            the estimator level.</para> <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Integers or spans of integers (see examples)</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>{All}</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>ThinMode</guilabel></entry>

            <entry><para>'Frequency' for record count frequency mode and
            'Time' for time interval mode. This field is only applicable when
            the <guilabel>AcceptFilter</guilabel> is used on a
            <guilabel>TrackingFileSet</guilabel>.</para> <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>'Frequency' or 'Time'</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>Frequency</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>ThinningFrequency</guilabel></entry>

            <entry><para>If <guilabel>ThinMode</guilabel> is Frequency, the
            integer 'n' is used to specify that every nth data point should be
            accepted. For example, 3 specifies that every third data point,
            meeting all the accept criteria, should be accepted and 1
            specifies that every data point, meeting all the accept criteria,
            should be accepted. If <guilabel>ThinMode</guilabel> is Time, the
            integer 'n' is a number of seconds between accepted observations,
            using the first available observation as the anchor epoch. For
            example, a value of 300 means that observations will be accepted
            every 300 seconds, starting from the first available observation.
            This field is only applicable when the
            <guilabel>AcceptFilter</guilabel> is used on a
            <guilabel>TrackingFileSet</guilabel>.</para> <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Integer</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Positive Integer</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>1</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>Depends on <guilabel>ThinMode</guilabel>
                    value</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>

          <row>
            <entry><guilabel>Trackers</guilabel></entry>

            <entry><para>List of user-created trackers (e.g., name of the
            <guilabel>GroundStation</guilabel> resource being used) </para>
            <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Object Array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>any valid user-created Tracker object (e.g.,
                    <guilabel>GroundStation</guilabel>) or 'All'</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>{All}</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist></entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </refsection>

  <refsection>
    <title>Remarks</title>

    <para>Some fields of <guilabel>AcceptFilter</guilabel> are not applicable
    at either the first-level (tracking file set) or second-level (estimator)
    editing stages. The <guilabel>RecordNumbers</guilabel> field has no
    functionality when applied to an accept filter at the tracking file set
    level. The <guilabel>FileNames</guilabel>,
    <guilabel>ThinningFrequency</guilabel>, and <guilabel>ThinMode</guilabel>
    fields have no functionality when applied to an accept filter at the
    estimator level.</para>

    <para>Use of combinations of instances of
    <guilabel>AcceptFilter</guilabel> and <guilabel>RejectFilter</guilabel> at
    both levels is permitted.</para>
  </refsection>

  <refsection>
    <title>Examples</title>

    <refsection>
      <title>First-level (TrackingFileSet) Data Editing</title>

      <para>The following examples illustrate use of an
      <guilabel>AcceptFilter</guilabel> for first-level data editing. At this
      level, the <guilabel>AcceptFilter</guilabel> instance should be assigned
      to the <guilabel>DataFilters</guilabel> field of a
      <guilabel>TrackingFileSet</guilabel>. In these examples, only data
      meeting the criteria specified by the accept filter will be admitted
      through. All other data is immediately discarded.</para>

      <informalexample>
        <para>This example shows how to create an
        <guilabel>AcceptFilter</guilabel> to sample the data at a frequency of
        1:10 (thinning the data to one tenth of its volume).</para>

        <programlisting>Create AcceptFilter af;
  
af.ThinningFrequency = 10;

Create TrackingFileSet estData;

estData.DataFilters = {af};

BeginMissionSequence;</programlisting>
      </informalexample>

      <informalexample>
        <para>The next example will accept all data from station
        <guilabel>GDS</guilabel> and accept every 5th observation from station
        <guilabel>CAN</guilabel>. Only data from stations
        <guilabel>GDS</guilabel> and <guilabel>CAN</guilabel> will be
        accepted.</para>

        <programlisting>Create AcceptFilter af1;
Create AcceptFilter af2;
 
Create GroundStation GDS CAN;

af1.Trackers          = {'GDS'}; 
af2.Trackers          = {'CAN'};
af2.ThinningFrequency = 5;
 
Create TrackingFileSet estData;
 
estData.DataFilters = {af1, af2};

BeginMissionSequence;</programlisting>
      </informalexample>

      <informalexample>
        <para>The last example illustrates thinning data by time interval,
        using a 300-second thinning interval.</para>

        <programlisting>Create AcceptFilter saf;
 
af.ThinMode          = 'Time'; 
af.ThinningFrequency = 300;
 
Create TrackingFileSet estData;
 
estData.DataFilters = {af};

BeginMissionSequence;</programlisting>
      </informalexample>
    </refsection>

    <refsection>
      <title>Second-level (estimator) Data Editing</title>

      <para>The following examples illustrate use of an
      <guilabel>AcceptFilter</guilabel> for second-level data editing. At this
      level, the <guilabel>AcceptFilter</guilabel> instance should be assigned
      to the <guilabel>DataFilters</guilabel> field of a
      <guilabel>BatchEstimator</guilabel>. In these examples, only data
      meeting the criteria specified by the accept filter will be used in the
      estimation state update. Residuals will be computed for all available
      data (all data admitted at the first level), but data not accepted at
      the estimator level will be flagged as user edited.</para>

      <informalexample>
        <para>This example shows how to create an
        <guilabel>AcceptFilter</guilabel> to accept specific data records by
        record number.</para>

        <programlisting>Create AcceptFilter af;
  
af.RecordNumbers = {10, 11, 20-150, 155-300};

Create BatchEstimator bls;

bls.DataFilters = {af};

BeginMissionSequence;</programlisting>
      </informalexample>

      <informalexample>
        <para>The next example will accept only range data from station
        <guilabel>MAD</guilabel> over the time span 10 Jun 2012 02:56 to
        13:59.</para>

        <programlisting>Create AcceptFilter af;
Create GroundStation MAD;

af.Trackers     = {'MAD'};
af.DataTypes    = {'Range'};
af.EpochFormat  = UTCGregorian;
af.InitialEpoch = '10 Jun 2012 02:56:00.000';
af.FinalEpoch   = '10 Jun 2012 13:59:00.000';

Create BatchEstimator bls;

bls.DataFilters = {af};

BeginMissionSequence;</programlisting>
      </informalexample>

      <informalexample>
        <para>The last example illustrates accepting all data from station
        <guilabel>MAD</guilabel> and only range data from station
        <guilabel>CAN</guilabel>.</para>

        <programlisting>Create AcceptFilter af1 af2;
Create GroundStation MAD CAN;
 
af1.Trackers         = {'MAD'}; 
af2.Trackers         = {'CAN'};
af2.DataTypes        = {'Range'};
 
Create BatchEstimator bls;
 
bls.DataFilters = {af1, af2};

BeginMissionSequence;</programlisting>
      </informalexample>
    </refsection>
  </refsection>
</refentry>
